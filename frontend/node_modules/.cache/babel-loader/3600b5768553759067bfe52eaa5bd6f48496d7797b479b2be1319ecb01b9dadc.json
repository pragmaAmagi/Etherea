{"ast":null,"code":"import axios from 'axios';\n\n// Function to get the API URL\nconst getApiUrl = async () => {\n  try {\n    const response = await fetch('http://localhost:5000/api/port');\n    const data = await response.json();\n    return `http://localhost:${data.port}`;\n  } catch (error) {\n    console.error('Failed to get API port:', error);\n    return 'http://localhost:5000'; // Fallback to default port\n  }\n};\nlet api;\nconst initApi = async () => {\n  const API_URL = await getApiUrl();\n  api = axios.create({\n    baseURL: API_URL,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n};\nexport const getGameState = async () => {\n  if (!api) await initApi();\n  return api.get('/game_state');\n};\nexport const getPendingActions = async () => {\n  if (!api) await initApi();\n  return api.get('/pending_actions');\n};\nexport const proposeAction = async action => {\n  if (!api) await initApi();\n  return api.post('/propose_action', action);\n};\nexport const supportAction = async (actionId, support) => {\n  if (!api) await initApi();\n  return api.post(`/support_action/${actionId}`, {\n    support\n  });\n};\nexport const runGame = async outcome => {\n  if (!api) await initApi();\n  return api.post('/run_game', {\n    outcome\n  });\n};\nexport const resetGame = async () => {\n  if (!api) await initApi();\n  return api.post('/reset_game');\n};\nexport default api;","map":{"version":3,"names":["axios","getApiUrl","response","fetch","data","json","port","error","console","api","initApi","API_URL","create","baseURL","headers","getGameState","get","getPendingActions","proposeAction","action","post","supportAction","actionId","support","runGame","outcome","resetGame"],"sources":["/home/pragami/New Game/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Function to get the API URL\nconst getApiUrl = async () => {\n    try {\n        const response = await fetch('http://localhost:5000/api/port');\n        const data = await response.json();\n        return `http://localhost:${data.port}`;\n    } catch (error) {\n        console.error('Failed to get API port:', error);\n        return 'http://localhost:5000'; // Fallback to default port\n    }\n};\n\nlet api;\n\nconst initApi = async () => {\n    const API_URL = await getApiUrl();\n    api = axios.create({\n        baseURL: API_URL,\n        headers: {\n            'Content-Type': 'application/json',\n        },\n    });\n};\n\nexport const getGameState = async () => {\n    if (!api) await initApi();\n    return api.get('/game_state');\n};\n\nexport const getPendingActions = async () => {\n    if (!api) await initApi();\n    return api.get('/pending_actions');\n};\n\nexport const proposeAction = async (action) => {\n    if (!api) await initApi();\n    return api.post('/propose_action', action);\n};\n\nexport const supportAction = async (actionId, support) => {\n    if (!api) await initApi();\n    return api.post(`/support_action/${actionId}`, { support });\n};\n\nexport const runGame = async (outcome) => {\n    if (!api) await initApi();\n    return api.post('/run_game', { outcome });\n};\n\nexport const resetGame = async () => {\n    if (!api) await initApi();\n    return api.post('/reset_game');\n};\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC1B,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gCAAgC,CAAC;IAC9D,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAClC,OAAO,oBAAoBD,IAAI,CAACE,IAAI,EAAE;EAC1C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAO,uBAAuB,CAAC,CAAC;EACpC;AACJ,CAAC;AAED,IAAIE,GAAG;AAEP,MAAMC,OAAO,GAAG,MAAAA,CAAA,KAAY;EACxB,MAAMC,OAAO,GAAG,MAAMV,SAAS,CAAC,CAAC;EACjCQ,GAAG,GAAGT,KAAK,CAACY,MAAM,CAAC;IACfC,OAAO,EAAEF,OAAO;IAChBG,OAAO,EAAE;MACL,cAAc,EAAE;IACpB;EACJ,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;EACpC,IAAI,CAACN,GAAG,EAAE,MAAMC,OAAO,CAAC,CAAC;EACzB,OAAOD,GAAG,CAACO,GAAG,CAAC,aAAa,CAAC;AACjC,CAAC;AAED,OAAO,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;EACzC,IAAI,CAACR,GAAG,EAAE,MAAMC,OAAO,CAAC,CAAC;EACzB,OAAOD,GAAG,CAACO,GAAG,CAAC,kBAAkB,CAAC;AACtC,CAAC;AAED,OAAO,MAAME,aAAa,GAAG,MAAOC,MAAM,IAAK;EAC3C,IAAI,CAACV,GAAG,EAAE,MAAMC,OAAO,CAAC,CAAC;EACzB,OAAOD,GAAG,CAACW,IAAI,CAAC,iBAAiB,EAAED,MAAM,CAAC;AAC9C,CAAC;AAED,OAAO,MAAME,aAAa,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,KAAK;EACtD,IAAI,CAACd,GAAG,EAAE,MAAMC,OAAO,CAAC,CAAC;EACzB,OAAOD,GAAG,CAACW,IAAI,CAAC,mBAAmBE,QAAQ,EAAE,EAAE;IAAEC;EAAQ,CAAC,CAAC;AAC/D,CAAC;AAED,OAAO,MAAMC,OAAO,GAAG,MAAOC,OAAO,IAAK;EACtC,IAAI,CAAChB,GAAG,EAAE,MAAMC,OAAO,CAAC,CAAC;EACzB,OAAOD,GAAG,CAACW,IAAI,CAAC,WAAW,EAAE;IAAEK;EAAQ,CAAC,CAAC;AAC7C,CAAC;AAED,OAAO,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EACjC,IAAI,CAACjB,GAAG,EAAE,MAAMC,OAAO,CAAC,CAAC;EACzB,OAAOD,GAAG,CAACW,IAAI,CAAC,aAAa,CAAC;AAClC,CAAC;AAED,eAAeX,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}